"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var axios_1 = tslib_1.__importDefault(require("axios"));
var RestApi = /** @class */ (function () {
    function RestApi(baseURL, tokenProvider, version) {
        var basePath = baseURL.endsWith('/') ? baseURL.substring(0, baseURL.length - 1) : baseURL;
        this.http = axios_1.default.create({
            baseURL: version ? basePath + "/" + version : basePath,
        });
        if (tokenProvider) {
            this.http.interceptors.request.use(function (config) {
                config.headers.common = { Authorization: 'Bearer ' + tokenProvider() };
                return config;
            });
        }
        this.http.interceptors.response.use(undefined, this.errorHandler);
    }
    RestApi.prototype.errorHandler = function (error) {
        return Promise.reject(error.response);
    };
    return RestApi;
}());
exports.default = RestApi;
//# sourceMappingURL=RestApi.js.map